<!-- Contact Section -->
<section id="contact" class="py-20 bg-white dark:bg-slate-800 relative">
    <div class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8">
        <div class="text-center mb-16 animate-fade-in">
            <h2
                class="text-5xl font-bold mb-4 bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent">
                Get In Touch
            </h2>
            <p class="text-xl text-gray-600 dark:text-gray-400">Let's work together on your next project</p>
        </div>
        <div class="grid md:grid-cols-2 gap-12">
            <div class="animate-slide-up">
                <h3
                    class="text-3xl font-semibold mb-8 bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent">
                    Contact Information
                </h3>
                <div class="space-y-6">
                    <div
                        class="group flex items-center p-4 rounded-xl bg-gray-100 dark:bg-slate-700 hover:bg-gray-200 dark:hover:bg-slate-600 transition-all duration-300 transform hover:-translate-y-1 hover:shadow-lg border border-gray-200 dark:border-slate-600">
                        <div
                            class="w-12 h-12 bg-gradient-to-r from-blue-600 to-purple-600 rounded-xl flex items-center justify-center mr-4 group-hover:scale-110 transition-transform duration-300">
                            <svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                    d="M3 8l7.89 4.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z">
                                </path>
                            </svg>
                        </div>
                        <div>
                            <p class="font-semibold text-gray-900 dark:text-gray-100">Email</p>
                            <p
                                class="text-gray-600 dark:text-gray-400 group-hover:text-blue-600 dark:group-hover:text-blue-400 transition-colors duration-300">
                                manmeetsingh28603@gmail.com</p>
                        </div>
                    </div>
                    <div
                        class="group flex items-center p-4 rounded-xl bg-gray-100 dark:bg-slate-700 hover:bg-gray-200 dark:hover:bg-slate-600 transition-all duration-300 transform hover:-translate-y-1 hover:shadow-lg border border-gray-200 dark:border-slate-600">
                        <div
                            class="w-12 h-12 bg-gradient-to-r from-purple-600 to-emerald-500 rounded-xl flex items-center justify-center mr-4 group-hover:scale-110 transition-transform duration-300">
                            <svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                    d="M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z">
                                </path>
                            </svg>
                        </div>
                        <div>
                            <p class="font-semibold text-gray-900 dark:text-gray-100">Phone</p>
                            <p
                                class="text-gray-600 dark:text-gray-400 group-hover:text-blue-600 dark:group-hover:text-blue-400 transition-colors duration-300">
                                +91 7348123502</p>
                        </div>
                    </div>
                    <div
                        class="group flex items-center p-4 rounded-xl bg-gray-100 dark:bg-slate-700 hover:bg-gray-200 dark:hover:bg-slate-600 transition-all duration-300 transform hover:-translate-y-1 hover:shadow-lg border border-gray-200 dark:border-slate-600">
                        <div
                            class="w-12 h-12 bg-gradient-to-r from-amber-500 to-orange-500 rounded-xl flex items-center justify-center mr-4 group-hover:scale-110 transition-transform duration-300">
                            <svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                    d="M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z">
                                </path>
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                    d="M15 11a3 3 0 11-6 0 3 3 0 016 0z"></path>
                            </svg>
                        </div>
                        <div>
                            <p class="font-semibold text-gray-900 dark:text-gray-100">Location</p>
                            <p
                                class="text-gray-600 dark:text-gray-400 group-hover:text-blue-600 dark:group-hover:text-blue-400 transition-colors duration-300">
                                India</p>
                        </div>
                    </div>
                </div>
            </div>

            <div class="animate-slide-up">
                <h3
                    class="text-3xl font-semibold mb-8 bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent">
                    Send Message
                </h3>
                <form method="post" class="space-y-6">
                    {% csrf_token %}

                    {% if messages %}
                    <div class="space-y-2">
                        {% for message in messages %}
                        <div
                            class="p-4 rounded-lg {% if message.tags == 'success' %}bg-green-100 border border-green-400 text-green-700{% elif message.tags == 'error' %}bg-red-100 border border-red-400 text-red-700{% else %}bg-blue-100 border border-blue-400 text-blue-700{% endif %}">
                            {{ message }}
                        </div>
                        {% endfor %}
                    </div>
                    {% endif %}

                    <div>
                        <label for="{{ contact_form.name.id_for_label }}"
                            class="block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2">Name</label>
                        {{ contact_form.name }}
                        {% if contact_form.name.errors %}
                        <div class="text-red-600 text-sm mt-1">
                            {% for error in contact_form.name.errors %}
                            {{ error }}
                            {% endfor %}
                        </div>
                        {% endif %}
                    </div>

                    <div>
                        <label for="{{ contact_form.email.id_for_label }}"
                            class="block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2">Email</label>
                        {{ contact_form.email }}
                        {% if contact_form.email.errors %}
                        <div class="text-red-600 text-sm mt-1">
                            {% for error in contact_form.email.errors %}
                            {{ error }}
                            {% endfor %}
                        </div>
                        {% endif %}
                    </div>

                    <div>
                        <label for="{{ contact_form.message.id_for_label }}"
                            class="block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2">Message</label>
                        {{ contact_form.message }}
                        <div class="flex justify-between items-center mt-1">
                            <div class="text-sm text-gray-500 dark:text-gray-400">
                                <span id="charCount">0</span>/2000 characters
                            </div>
                            <div class="text-xs text-gray-400 dark:text-gray-500">
                                Minimum 10 characters required
                            </div>
                        </div>
                        {% if contact_form.message.errors %}
                        <div class="text-red-600 text-sm mt-1">
                            {% for error in contact_form.message.errors %}
                            {{ error }}
                            {% endfor %}
                        </div>
                        {% endif %}
                    </div>

                    <button type="submit" id="submitBtn"
                        class="group w-full bg-gradient-to-r from-blue-600 to-purple-600 text-white py-4 rounded-xl hover:shadow-2xl hover:shadow-blue-500/25 transition-all duration-300 transform hover:-translate-y-1 hover:scale-105 disabled:opacity-50 disabled:cursor-not-allowed disabled:transform-none">
                        <span class="flex items-center justify-center" id="buttonContent">
                            <span id="buttonText">Send Message</span>
                            <svg id="sendIcon"
                                class="w-5 h-5 ml-2 group-hover:translate-x-1 transition-transform duration-300"
                                fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                    d="M12 19l9 2-9-18-9 18 9-2zm0 0v-8"></path>
                            </svg>
                        </span>

                        <!-- Loading Animation (Hidden by default) -->
                        <span class="flex items-center justify-center hidden" id="loadingContent">
                            <svg class="animate-spin -ml-1 mr-3 h-5 w-5 text-white" xmlns="http://www.w3.org/2000/svg"
                                fill="none" viewBox="0 0 24 24">
                                <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor"
                                    stroke-width="4"></circle>
                                <path class="opacity-75" fill="currentColor"
                                    d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z">
                                </path>
                            </svg>
                            <span>Sending...</span>
                        </span>

                        <!-- Success Animation (Hidden by default) -->
                        <span class="flex items-center justify-center hidden" id="successContent">
                            <svg class="w-5 h-5 mr-2 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                    d="M5 13l4 4L19 7"></path>
                            </svg>
                            <span>Message Sent!</span>
                        </span>
                    </button>
                </form>
            </div>
        </div>
    </div>

    <!-- Contact Form JavaScript -->
    <script>
        document.addEventListener('DOMContentLoaded', function () {
            const form = document.querySelector('form[method="post"]');
            const submitBtn = document.getElementById('submitBtn');
            const buttonContent = document.getElementById('buttonContent');
            const loadingContent = document.getElementById('loadingContent');
            const successContent = document.getElementById('successContent');
            
            // Get form fields
            const nameField = document.getElementById('{{ contact_form.name.id_for_label }}');
            const emailField = document.getElementById('{{ contact_form.email.id_for_label }}');
            const messageField = document.getElementById('{{ contact_form.message.id_for_label }}');
            
            // Add real-time validation
            if (nameField) {
                nameField.addEventListener('input', function() {
                    validateName(this.value);
                });
            }
            
            if (emailField) {
                emailField.addEventListener('input', function() {
                    validateEmail(this.value);
                });
            }
            
            if (messageField) {
                messageField.addEventListener('input', function() {
                    validateMessage(this.value);
                    updateCharCount(this.value);
                });
            }
            
            // Character counter function
            function updateCharCount(text) {
                const charCount = document.getElementById('charCount');
                if (charCount) {
                    const count = text.length;
                    charCount.textContent = count;
                    
                    // Change color based on length
                    if (count < 10) {
                        charCount.className = 'text-red-500';
                    } else if (count > 1800) {
                        charCount.className = 'text-orange-500';
                    } else {
                        charCount.className = 'text-gray-500 dark:text-gray-400';
                    }
                }
            }

            // Validation functions
            function validateName(name) {
                const nameError = nameField.parentNode.querySelector('.field-error');
                if (nameError) nameError.remove();
                
                if (!name.trim()) {
                    showFieldError(nameField, 'Name is required.');
                    return false;
                }
                if (name.trim().length < 2) {
                    showFieldError(nameField, 'Name must be at least 2 characters long.');
                    return false;
                }
                clearFieldError(nameField);
                return true;
            }
            
            function validateEmail(email) {
                const emailError = emailField.parentNode.querySelector('.field-error');
                if (emailError) emailError.remove();
                
                if (!email.trim()) {
                    showFieldError(emailField, 'Email is required.');
                    return false;
                }
                
                const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
                if (!emailRegex.test(email)) {
                    showFieldError(emailField, 'Please enter a valid email address.');
                    return false;
                }
                
                clearFieldError(emailField);
                return true;
            }
            
            function validateMessage(message) {
                const messageError = messageField.parentNode.querySelector('.field-error');
                if (messageError) messageError.remove();
                
                if (!message.trim()) {
                    showFieldError(messageField, 'Message is required.');
                    return false;
                }
                if (message.trim().length < 10) {
                    showFieldError(messageField, 'Message must be at least 10 characters long.');
                    return false;
                }
                if (message.trim().length > 2000) {
                    showFieldError(messageField, 'Message is too long. Please keep it under 2000 characters.');
                    return false;
                }
                clearFieldError(messageField);
                return true;
            }
            
            function showFieldError(field, message) {
                const errorDiv = document.createElement('div');
                errorDiv.className = 'field-error text-red-600 text-sm mt-1';
                errorDiv.textContent = message;
                field.parentNode.appendChild(errorDiv);
                field.classList.add('border-red-500');
            }
            
            function clearFieldError(field) {
                const errorDiv = field.parentNode.querySelector('.field-error');
                if (errorDiv) errorDiv.remove();
                field.classList.remove('border-red-500');
            }
            
            function validateForm() {
                const nameValid = validateName(nameField.value);
                const emailValid = validateEmail(emailField.value);
                const messageValid = validateMessage(messageField.value);
                return nameValid && emailValid && messageValid;
            }

            if (form && submitBtn) {
                form.addEventListener('submit', function (e) {
                    // Prevent default form submission
                    e.preventDefault();

                    // Validate form before submission
                    if (!validateForm()) {
                        return;
                    }

                    // Show loading state
                    showLoadingState();

                    // Submit form using fetch
                    const formData = new FormData(form);

                    // Get CSRF token
                    const csrfToken = document.querySelector('[name=csrfmiddlewaretoken]').value;

                    fetch(window.location.href, {
                        method: 'POST',
                        body: formData,
                        headers: {
                            'X-Requested-With': 'XMLHttpRequest',
                            'X-CSRFToken': csrfToken,
                        }
                    })
                        .then(response => {
                            if (response.ok) {
                                return response.json();
                            }
                            return response.json().then(err => Promise.reject(err));
                        })
                        .then(data => {
                            if (data.status === 'success') {
                                // Show success state
                                showSuccessState();

                                // Reset form
                                form.reset();
                                
                                // Reset character counter
                                updateCharCount('');
                                
                                // Clear any field errors
                                clearFieldError(nameField);
                                clearFieldError(emailField);
                                clearFieldError(messageField);

                                // Hide success state after 3 seconds and reset button
                                setTimeout(() => {
                                    resetButtonState();
                                }, 3000);
                            } else {
                                console.error('Server error:', data);
                                if (data.errors) {
                                    console.error('Form errors:', data.errors);
                                }
                                throw new Error(data.message || 'Unknown error occurred');
                            }
                        })
                        .catch(error => {
                            console.error('Error:', error);
                            // Show error state
                            showErrorState();

                            // Show error message if available
                            if (error.message) {
                                console.error('Error message:', error.message);
                            }

                            // Reset button after 3 seconds
                            setTimeout(() => {
                                resetButtonState();
                            }, 3000);
                        });
                });
            }

            function showLoadingState() {
                submitBtn.disabled = true;
                buttonContent.classList.add('hidden');
                loadingContent.classList.remove('hidden');
                loadingContent.classList.add('animate-scale-in');
                submitBtn.classList.remove('hover:shadow-2xl', 'hover:shadow-blue-500/25', 'hover:-translate-y-1', 'hover:scale-105');
            }

            function showSuccessState() {
                loadingContent.classList.add('hidden');
                successContent.classList.remove('hidden');
                successContent.classList.add('animate-bounce-in');
                submitBtn.classList.add('bg-gradient-to-r', 'from-green-600', 'to-emerald-600');
                submitBtn.classList.remove('from-blue-600', 'to-purple-600');
            }

            function showErrorState() {
                loadingContent.classList.add('hidden');
                buttonContent.classList.remove('hidden');
                submitBtn.classList.add('bg-gradient-to-r', 'from-red-600', 'to-pink-600');
                submitBtn.classList.remove('from-blue-600', 'to-purple-600', 'from-green-600', 'to-emerald-600');
                document.getElementById('buttonText').textContent = 'Error! Try Again';
            }

            function resetButtonState() {
                submitBtn.disabled = false;
                loadingContent.classList.add('hidden');
                successContent.classList.add('hidden');
                buttonContent.classList.remove('hidden');
                submitBtn.classList.remove('from-green-600', 'to-emerald-600', 'from-red-600', 'to-pink-600');
                submitBtn.classList.add('from-blue-600', 'to-purple-600');
                submitBtn.classList.add('hover:shadow-2xl', 'hover:shadow-blue-500/25', 'hover:-translate-y-1', 'hover:scale-105');
                document.getElementById('buttonText').textContent = 'Send Message';
            }
        });
    </script>
</section>